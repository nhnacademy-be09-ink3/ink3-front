<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<th:block th:fragment="categoryTree(categoryTree, prefix)">
  <ul class="space-y-1">
    <li th:each="category : ${categoryTree}">
      <div class="flex items-center space-x-2">
        <span th:text="${prefix + '├── ' + category.name}" class="text-gray-800 font-medium"></span>
        <!-- 최하위 카테고리일 때만 삭제 버튼 보이기 -->
        <div class="ml-auto space-x-2" th:if="${#lists.isEmpty(category.children)}">
          <form th:action="@{/admin/categories/{id}(id=${category.id})}" method="post" class="inline">
            <input type="hidden" name="_method" value="delete"/>
            <button type="submit" class="bg-red-500 px-2 py-1 text-white rounded-xl hover:bg-red-400">삭제</button>
          </form>
        </div>
      </div>

      <!-- 재귀적으로 자식 호출 -->
      <div th:if="${not #lists.isEmpty(category.children)}"
           th:replace="~{admin/layout/fragments/categoryTreeFragment :: categoryTree(${category.children}, ${prefix + '│   '})}">
      </div>
    </li>
  </ul>
</th:block>
</body>
</html>


<!-- 삭제 버튼 -->
<form th:action="@{/admin/pubs/{id}(id=${publisher.id})}" method="post" class="inline">
  <input type="hidden" name="_method" value="delete"/>
  <button type="submit" class="bg-red-500 px-2 py-1 text-white rounded-xl hover:bg-red-400">삭제</button>
</form>